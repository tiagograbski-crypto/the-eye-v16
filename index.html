<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GATE RUBI | ULTIMATE V26</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;600;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">

    <style>
        /* =========================================
           1. CORE ENGINE (VISUAL)
           ========================================= */
        :root {
            --rubi: #ff003c;           /* Vermelho Principal */
            --rubi-dark: #8a0020;      /* Vermelho Escuro */
            --rubi-glow: rgba(255, 0, 60, 0.5);
            --void: #020202;           /* Fundo Absoluto */
            --glass: rgba(10, 5, 5, 0.9); /* Vidro Escuro */
            --border: rgba(255, 0, 60, 0.3);
            --text: #e0e0e0;
            --cyan: #00f3ff;           /* Cor de Contraste (Aliados/Seguro) */
            --warning: #ff9d00;        /* Laranja (Internet/Alerta) */
        }

        * { box-sizing: border-box; outline: none; user-select: none; }

        body {
            margin: 0; padding: 0;
            background-color: var(--void);
            font-family: 'Rajdhani', sans-serif;
            color: var(--text);
            height: 100vh;
            overflow: hidden;
            display: flex; justify-content: center; align-items: center;
        }

        /* EFEITO CRT / SCANLINE */
        body::after {
            content: " "; display: block; position: absolute;
            top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                        linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            z-index: 2; background-size: 100% 2px, 3px 100%; pointer-events: none;
        }

        /* FUNDO ANIMADO */
        #neural-canvas {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0; opacity: 0.25; pointer-events: none;
        }

        /* =========================================
           2. CAMADA DE SEGURAN√áA (LOGIN)
           ========================================= */
        .gate-layer {
            position: absolute; z-index: 100;
            width: 100%; height: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            background: rgba(0,0,0,0.95);
            transition: all 1.2s cubic-bezier(0.19, 1, 0.22, 1);
        }

        .gate-box {
            background: var(--glass);
            width: 420px; padding: 40px;
            border: 1px solid var(--rubi);
            border-radius: 8px;
            box-shadow: 0 0 40px rgba(255, 0, 60, 0.1);
            text-align: center;
            position: relative;
            backdrop-filter: blur(10px);
        }

        /* SCANNER SUPERIOR */
        .gate-box::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 3px;
            background: var(--rubi);
            box-shadow: 0 0 15px var(--rubi);
            animation: scan 2.5s infinite ease-in-out;
        }
        @keyframes scan { 0%, 100% { left: 0; width: 0; } 50% { left: 0; width: 100%; } }

        .gate-title { 
            font-family: 'Orbitron'; font-size: 2.5rem; color: white; margin: 0; 
            letter-spacing: 4px; text-shadow: 0 0 15px var(--rubi); 
        }
        .gate-sub { color: var(--rubi); font-size: 0.8rem; letter-spacing: 6px; margin-bottom: 30px; font-weight: bold; }

        /* ANIMA√á√ÉO DO GLOBO (ELEMENTO VISUAL) */
        .holo-globe {
            position: relative; width: 140px; height: 140px; margin: 0 auto 30px auto;
            perspective: 1000px; transform-style: preserve-3d;
        }
        .ring {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            border: 2px solid var(--rubi); border-radius: 50%;
            animation: rotate 6s linear infinite; box-shadow: 0 0 10px var(--rubi);
        }
        .ring:nth-child(2) { transform: rotateX(60deg); animation-delay: -2s; border-color: var(--cyan); box-shadow: 0 0 10px var(--cyan); }
        .ring:nth-child(3) { transform: rotateY(60deg); animation-delay: -4s; }
        @keyframes rotate { 0% { transform: rotateX(0) rotateY(0); } 100% { transform: rotateX(360deg) rotateY(360deg); } }

        /* CONTROLES DE LOGIN */
        .status-text { 
            font-family: 'Share Tech Mono'; font-size: 0.9rem; color: #888; 
            min-height: 20px; margin-bottom: 15px; 
        }
        .blink { animation: blinker 0.8s infinite; color: var(--rubi); }
        @keyframes blinker { 50% { opacity: 0; } }

        .btn-action {
            width: 100%; padding: 15px; cursor: pointer;
            background: linear-gradient(90deg, #1a0000, var(--rubi-dark));
            border: 1px solid var(--rubi); color: white; font-weight: bold;
            font-family: 'Orbitron'; letter-spacing: 2px;
            transition: 0.3s;
        }
        .btn-action:hover { background: var(--rubi); box-shadow: 0 0 25px var(--rubi-glow); color: black; }
        
        .input-pin {
            width: 100%; padding: 15px; background: rgba(0,0,0,0.8);
            border: 1px solid #444; color: var(--rubi); text-align: center;
            font-family: 'Orbitron'; font-size: 1.5rem; letter-spacing: 8px;
            margin-bottom: 15px; display: none;
        }
        .input-pin:focus { border-color: var(--rubi); outline: none; box-shadow: 0 0 15px var(--rubi-glow); }

        /* =========================================
           3. CAMADA DO DASHBOARD (PAINEL)
           ========================================= */
        .dash-layer {
            position: absolute; z-index: 50; width: 95%; height: 92%; max-width: 1600px;
            display: grid; grid-template-columns: 280px 1fr; gap: 20px;
            opacity: 0; transform: scale(1.05); pointer-events: none; transition: 0.8s ease-out;
        }

        /* PAIN√âIS GERAIS */
        .panel {
            background: var(--glass); border: 1px solid var(--border);
            border-radius: 6px; padding: 20px; display: flex; flex-direction: column;
            position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        /* SIDEBAR (AGENTES) */
        .sidebar-header { 
            border-bottom: 2px solid var(--rubi); padding-bottom: 10px; margin-bottom: 20px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .sidebar-title { font-family: 'Orbitron'; font-size: 1.1rem; color: white; }

        .agent-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 12px; background: rgba(255,255,255,0.02); margin-bottom: 8px;
            border-left: 3px solid #333; transition: 0.3s;
        }
        .agent-item:hover { border-left-color: var(--rubi); background: rgba(255,0,60,0.05); }

        /* SWITCH TOGGLE */
        .toggle-switch {
            width: 40px; height: 20px; background: #111; border: 1px solid #444;
            border-radius: 10px; position: relative; cursor: pointer;
        }
        .toggle-switch::after {
            content:''; position: absolute; top: 2px; left: 2px; width: 14px; height: 14px;
            background: #666; border-radius: 50%; transition: 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
        }
        .toggle-switch.active { border-color: var(--rubi); background: rgba(255,0,60,0.2); }
        .toggle-switch.active::after { left: 22px; background: var(--rubi); box-shadow: 0 0 8px var(--rubi); }

        /* √ÅREA PRINCIPAL */
        .main-grid { display: grid; grid-template-rows: auto 1fr auto; gap: 20px; height: 100%; }

        /* CARDS SUPERIORES */
        .kpi-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; }
        .kpi-card {
            background: rgba(0,0,0,0.5); border: 1px solid #333; padding: 15px; position: relative;
        }
        .kpi-card.alert { border-color: var(--rubi); background: rgba(50, 0, 10, 0.3); }
        .kpi-card h4 { margin: 0; font-size: 0.7rem; color: #888; letter-spacing: 1px; }
        .kpi-val { font-family: 'Orbitron'; font-size: 1.6rem; margin-top: 5px; color: white; }
        .kpi-sub { font-size: 0.7rem; color: #666; margin-top: 5px; }

        .text-alert { color: var(--rubi); animation: pulse 1s infinite; }
        .text-warn { color: var(--warning); }
        .text-safe { color: var(--cyan); }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }

        /* MAPA T√ÅTICO */
        .tactical-map {
            flex: 1; border: 1px solid var(--border); background: #080505;
            position: relative; overflow: hidden; border-radius: 4px;
            background-image: radial-gradient(circle, #220000 1px, transparent 1px);
            background-size: 40px 40px;
        }
        /* Efeito Radar */
        .radar-scan {
            position: absolute; width: 150%; height: 150%; top: -25%; left: -25%;
            background: conic-gradient(from 0deg, transparent 0deg, rgba(255, 0, 60, 0.15) 45deg, transparent 45deg);
            border-radius: 50%; animation: scan-radar 4s linear infinite; pointer-events: none;
        }
        @keyframes scan-radar { from {transform: rotate(0deg);} to {transform: rotate(360deg);} }

        /* MARCADORES NO MAPA */
        .marker {
            position: absolute; padding: 5px 10px; font-size: 0.75rem;
            background: rgba(0,0,0,0.8); border: 1px solid var(--rubi);
            color: var(--rubi); box-shadow: 0 0 10px var(--rubi-glow);
        }
        .marker.safe { border-color: var(--cyan); color: var(--cyan); box-shadow: 0 0 10px rgba(0, 243, 255, 0.3); }

        /* TERMINAL */
        .terminal {
            height: 140px; background: #050505; border: 1px solid #333; padding: 10px;
            font-family: 'Share Tech Mono', monospace; display: flex; flex-direction: column;
        }
        .terminal-output { flex: 1; overflow-y: auto; font-size: 0.8rem; color: #888; scrollbar-width: none; }
        .cmd-row { display: flex; border-top: 1px solid #222; margin-top: 5px; padding-top: 5px; }
        .prompt { color: var(--rubi); margin-right: 10px; }
        #cmd-input { background: transparent; border: none; color: white; width: 100%; font-family: inherit; font-size: 0.9rem; }

        /* ESTADOS DE VISIBILIDADE */
        .unlocked .gate-layer { opacity: 0; pointer-events: none; transform: scale(1.1); }
        .unlocked .dash-layer { opacity: 1; pointer-events: all; transform: scale(1); }

    </style>
</head>
<body>

    <canvas id="neural-canvas"></canvas>

    <div class="gate-layer" id="gate">
        <div class="gate-box">
            <h1 class="gate-title">GATE RUBI</h1>
            <div class="gate-sub">V26 ULTIMATE PROTOCOL</div>

            <div class="holo-globe">
                <div class="ring"></div>
                <div class="ring"></div>
                <div class="ring"></div>
            </div>

            <div class="status-text" id="status-msg">
                AGUARDANDO CHAVE F√çSICA... <span class="blink">_</span>
            </div>

            <button id="btn-usb" class="btn-action" onclick="inserirPenDrive()">
                INSERIR PEN DRIVE (KEY)
            </button>

            <input type="password" id="pin-input" class="input-pin" maxlength="4" placeholder="****">
            <button id="btn-unlock" class="btn-action" style="display:none;" onclick="validarPin()">
                DESBLOQUEAR SISTEMA
            </button>
        </div>
    </div>

    <div class="dash-layer" id="dashboard">
        
        <aside class="panel">
            <div class="sidebar-header">
                <span class="sidebar-title">AGENTS</span>
                <span style="font-size:0.8rem; color:var(--cyan)">ONLINE</span>
            </div>

            <div class="agent-item">
                <span>HUNTER (Vendas)</span>
                <div class="toggle-switch" id="sw-hunter" onclick="toggleAgent('hunter')"></div>
            </div>
            <div class="agent-item">
                <span>SAC (Suporte)</span>
                <div class="toggle-switch" id="sw-sac" onclick="toggleAgent('sac')"></div>
            </div>
            <div class="agent-item">
                <span>MANAGER (Gest√£o)</span>
                <div class="toggle-switch" id="sw-manager" onclick="toggleAgent('manager')"></div>
            </div>

            <div style="margin-top:auto; padding-top:20px; border-top:1px solid #333;">
                <h4 style="margin:0 0 10px 0; color:#666;">SYSTEM METRICS</h4>
                <div style="font-size:0.8rem; color:#888; margin-bottom:5px;">SESSION: <span id="session-time">00:00:00</span></div>
                <button class="btn-action" style="padding:10px; font-size:0.8rem; margin-top:10px;" onclick="logout()">LOGOUT</button>
            </div>
        </aside>

        <main class="main-grid">
            
            <div class="kpi-row">
                <div class="kpi-card alert">
                    <h4>ENERGIA (REGIONAL)</h4>
                    <div class="kpi-val text-alert">CR√çTICO</div>
                    <div class="kpi-sub">Risco de Apag√£o</div>
                </div>
                <div class="kpi-card">
                    <h4>INTERNET</h4>
                    <div class="kpi-val text-warn">SAT√âLITE</div>
                    <div class="kpi-sub">Starlink Ativa</div>
                </div>
                <div class="kpi-card">
                    <h4>ALIMENTA√á√ÉO</h4>
                    <div class="kpi-val text-safe">100%</div>
                    <div class="kpi-sub">Estoque Seguro</div>
                </div>
                <div class="kpi-card">
                    <h4>ASTEROIDES</h4>
                    <div class="kpi-val">0.00%</div>
                    <div class="kpi-sub">Sem Amea√ßas</div>
                </div>
            </div>

            <div class="tactical-map">
                <div class="radar-scan"></div>
                
                <div class="marker" style="top: 30%; left: 25%;">
                    <strong>‚ö†Ô∏è ALERTA: CABOS</strong><br>
                    Setor Atl√¢ntico<br>Rompidos
                </div>

                <div class="marker safe" style="top: 60%; left: 60%;">
                    <strong>üõ°Ô∏è CHAPEC√ì (QG)</strong><br>
                    Defesa Ativa<br>Protocolo Rubi
                </div>

                <div style="position:absolute; bottom:10px; left:10px; font-size:0.7rem; color:#555;">
                    LAT: -27.1000 | LON: -52.6000 | SAT: CONNECTED
                </div>
            </div>

            <div class="terminal">
                <div class="terminal-output" id="term-out">
                    <div>[BOOT] Gate Rubi Kernel v26 loaded.</div>
                    <div>[NET] Establishing secure handshake...</div>
                </div>
                <div class="cmd-line">
                    <span class="prompt">admin@rubi:~$</span>
                    <input type="text" id="cmd-input" autocomplete="off">
                </div>
            </div>

        </main>
    </div>

    <script>
        // CONFIGURA√á√ïES
        const PIN_SECRET = "2025"; // SENHA MESTRA
        const termOut = document.getElementById('term-out');

        // --- SISTEMA DE LOGIN ---
        function inserirPenDrive() {
            const btn = document.getElementById('btn-usb');
            const status = document.getElementById('status-msg');

            btn.disabled = true;
            btn.innerHTML = "LENDO DISPOSITIVO...";
            status.innerHTML = "VERIFICANDO CHAVE DIGITAL...";
            status.style.color = "var(--cyan)";

            setTimeout(() => {
                status.innerHTML = "CHAVE ACEITA. <span style='color:var(--rubi)'>INSIRA O PIN.</span>";
                btn.style.display = 'none';
                
                document.getElementById('pin-input').style.display = 'block';
                document.getElementById('btn-unlock').style.display = 'block';
                document.getElementById('pin-input').focus();
            }, 1500);
        }

        function validarPin() {
            const input = document.getElementById('pin-input');
            const status = document.getElementById('status-msg');

            if (input.value === PIN_SECRET) {
                status.innerHTML = "ACESSO PERMITIDO.";
                status.style.color = "#0f0";
                
                document.body.classList.add('unlocked');
                logTerminal("User authenticated via 2FA (USB+PIN).");
                iniciarLogs();
            } else {
                status.innerHTML = "PIN INCORRETO.";
                input.value = "";
                input.focus();
                
                // Anima√ß√£o de erro
                document.querySelector('.gate-box').animate([
                    { transform: 'translateX(-10px)' }, { transform: 'translateX(10px)' }, { transform: 'translateX(0)' }
                ], { duration: 200, iterations: 2 });
            }
        }

        // Atalho Enter para o PIN
        document.getElementById('pin-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') validarPin();
        });

        // --- SISTEMA DASHBOARD ---
        
        // Rel√≥gio de Sess√£o
        let sessionSecs = 0;
        setInterval(() => {
            sessionSecs++;
            const date = new Date(sessionSecs * 1000).toISOString().substr(11, 8);
            document.getElementById('session-time').innerText = date;
        }, 1000);

        // Toggle Agentes
        function toggleAgent(agent) {
            const el = document.getElementById('sw-' + agent);
            el.classList.toggle('active');
            const state = el.classList.contains('active') ? "STARTED" : "STOPPED";
            logTerminal(`[AGENT] Service ${agent.toUpperCase()} -> ${state}`);
        }

        // Terminal Log
        function logTerminal(msg) {
            const line = document.createElement('div');
            const time = new Date().toLocaleTimeString().split(' ')[0];
            line.innerHTML = `<span style="color:#555">[${time}]</span> ${msg}`;
            termOut.appendChild(line);
            termOut.scrollTop = termOut.scrollHeight;
        }

        function iniciarLogs() {
            const logs = [
                "[GEO] Scanning regional sectors...",
                "[PWR] Grid fluctuations detected.",
                "[NET] Switching to Backup Satellite Link.",
                "[SEC] Encryption Key rotated.",
                "[SYS] Memory optimized."
            ];
            setInterval(() => {
                const randomMsg = logs[Math.floor(Math.random() * logs.length)];
                logTerminal(randomMsg);
            }, 3500);
        }

        // Input Terminal
        document.getElementById('cmd-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const cmd = this.value.trim().toLowerCase();
                logTerminal(`<span style="color:var(--rubi)">admin@rubi:~$</span> ${this.value}`);
                
                if (cmd === 'clear') termOut.innerHTML = '';
                else if (cmd === 'logout') logout();
                else logTerminal("Command not recognized.");
                
                this.value = '';
            }
        });

        function logout() {
            location.reload();
        }

        // --- PARTICLES BACKGROUND ---
        const canvas = document.getElementById('neural-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];

        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize);
        resize();

        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.size = Math.random() * 2;
            }
            update() {
                this.x += this.vx; this.y += this.vy;
                if(this.x < 0 || this.x > canvas.width) this.vx *= -1;
                if(this.y < 0 || this.y > canvas.height) this.vy *= -1;
            }
            draw() {
                ctx.fillStyle = 'rgba(255, 0, 60, 0.5)';
                ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI*2); ctx.fill();
            }
        }

        function initParticles() {
            particles = [];
            for(let i=0; i<100; i++) particles.push(new Particle());
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach((p, index) => {
                p.update(); p.draw();
                // Conex√µes
                for(let j = index; j < particles.length; j++) {
                    const dx = p.x - particles[j].x;
                    const dy = p.y - particles[j].y;
                    const dist = Math.sqrt(dx*dx + dy*dy);
                    if(dist < 100) {
                        ctx.strokeStyle = `rgba(255, 0, 60, ${0.1 - dist/1000})`;
                        ctx.lineWidth = 1;
                        ctx.beginPath(); ctx.moveTo(p.x, p.y); ctx.lineTo(particles[j].x, particles[j].y); ctx.stroke();
                    }
                }
            });
            requestAnimationFrame(animate);
        }

        initParticles();
        animate();

    </script>
</body>
</html>
